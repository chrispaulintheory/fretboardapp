<!DOCTYPE html>
<html lang="en">
  <!-- version 2025-10-27-2305 -->
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Intervals</title>
<style>
  body {
    margin: 0;
    background: #fff;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    display: flex; flex-direction: column; align-items: center;
  }
  h2 { margin: 16px 12px 6px; }

  #levelButtons {
    display: flex; gap: 10px; margin: 8px 0 6px;
  }
  .level-btn {
    background: #ccc; color: #333; border: 0; border-radius: 6px;
    padding: 8px 14px; font-size: 16px; cursor: pointer;
    transition: all 0.2s ease;
  }
  .level-btn:hover { background: #bbb; }
  .level-btn.active {
    background: #7e3ff2; color: #fff;
    transform: scale(1.05);
  }
  #levelDescription {
    font-size: 15px;
    color: #555;
    margin-bottom: 12px;
    text-align: center;
    max-width: 90%;
  }

  #bestScoreDisplay {
    font-weight: 600;
    color: #444;
    margin-top: 6px;
  }

  #controls {
    display: flex; gap: 10px; align-items: center; flex-wrap: wrap;
    justify-content: center; margin: 6px 0 10px;
  }
  button {
    background: #7e3ff2; color: #fff; border: 0; border-radius: 8px;
    padding: 10px 18px; font-size: 16px; cursor: pointer;
  }
  button:hover { filter: brightness(.95); }
  #resetBtn { display: none; background: #888; }
  #timer { font-weight: 700; }
  #feedback { min-height: 28px; font-weight: 700; }
  #scoreboard { font-weight: 600; }

  #board {
    position: relative; width: 1400px; height: 200px;
    background: url("{{ url_for('static', filename='cg-longneck.png') }}") center/contain no-repeat;
    border: 1px solid #ccc; margin: 8px 12px 12px;
  }
  .dot {
    position: absolute; width: 26px; height: 26px; border-radius: 50%;
    background: #7e3ff2; border: 3px solid #fff;
    box-shadow: 0 2px 6px rgba(0,0,0,.3);
    transform: translate(-50%, -50%);
  }

  /* ---- Game control buttons ---- */
  .game-controls-wrapper {
    text-align: center;
    margin-bottom: 20px;
  }
  .game-controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
  }
  .game-controls button {
    background: #fff;
    color: #333;
    border: 2px solid #888;
    border-radius: 6px;
    padding: 6px 12px;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.15s ease;
  }
  .game-controls button:hover { background: #eee; }
  .game-controls button.active-press {
    background: #7e3ff2;
    color: #fff;
    border-color: #7e3ff2;
    transform: scale(0.96);
  }
</style>
</head>
<body>
<h2>Intervals</h2>

<div id="levelButtons">
  <button class="level-btn active" data-level="1">Level 1</button>
  <button class="level-btn" data-level="2">Level 2</button>
  <button class="level-btn" data-level="3" disabled>Level 3</button>
</div>

<div id="levelDescription">
  Level 1: Perfect intervals (P1, P4, P5, P8) and the Tritone (A4/D5) on E–A–D–G string set.
</div>

<div id="bestScoreDisplay">
  Best Score: {{ best_score or 0 }}
</div>

<div id="controls">
  <button id="startBtn">Start</button>
  <button id="resetBtn">Reset</button>
  <div id="timer">2:00</div>
  <div id="scoreboard">Score: <span id="score">0</span></div>
  <div id="feedback"></div>
</div>

<div id="board"></div>

<!-- Controls legend -->
<div class="game-controls-wrapper text-center">
  <div class="game-controls" id="controlButtons">
    <button data-key="1">UNISON (1)</button>
    <button data-key="4">PERFECT 4th (4)</button>
    <button data-key="5">PERFECT 5th (5)</button>
    <button data-key="t">TRITONE (T)</button>
    <button data-key="8">OCTAVE (8)</button>
  </div>
</div>

<script>
/* ---- game script same as previous version (with no-repeat logic and fetch('/submit_score')) ---- */
</script>
</body>
</html>